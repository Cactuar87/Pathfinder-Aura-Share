https://ko-fi.com/cactuarcrunch

Manifest URL: https://github.com/FionaBrightgrass/Pathfinder-Aura-Share/raw/main/module.json


Cliff Notes:
_create the following_
-Item Type: Buff
-Dictionary Flag: "radius" & value > 0
-------the buff  now auto shares----------
Optional:
-Boolean Flag: "shareInactive"    -shares even if toggled off. Great for buffs that don't buff yourself, but just allies.
-Boolean Flag: "shareEnemies"     -Only share the aura with enemies. Typically combined with shareInactive.

Example: https://github.com/FionaBrightgrass/Pathfinder-Aura-Share/blob/main/AuraExample.png



Better Nots:
Add a buff to a PF1E actor. Name it whatever you'd like.

Give the aura actor a Dictionary Flag of "radius" with a value greater than 0.
optional: Give the aura a Boolean Flag of shareInactive to allow sharing of disabled auras. 
(Since this was changed in an update, adding it as a dictionary flag (legacy) will automatically apply the boolean flag...)

It will auto copy to other tokens except with:
The new buff name becomes: Aura Name (Source Actors Name)
"radius" is set to 0 on the recipient 

Adds the buff to allies if:
-The source actor has a buff with a radius > 0.
-The buff is enabled, OR if the source actor's buff has the "shareInactive" Boolean flag, it shares the buff even if it's disabled.
  Alternatively, you can name the flag "shareInactive" if that makes more sense to you. Either works.
  (This allows for buffs to be auras that don't aid the source)
  (shareInactive + buff disabled)
 
Adds the buff to enemies if:
-The buff also has a "shareEnemies" Boolean Flag. You typically would combine this with "shareInactive" so that the buff doesn't hurt the source actor.
 
Adds the Buff when:
-A new buff has a radius set to > 0 and the token moves or the buff is toggled. Best to create it on the actor then add to scene.
-The buff is toggled on.
-A token with an aura buff is added to the scene. (radius > 0)
-The actor's HP increases over 0, and the actor was previously dead.
-An actor moves into range of the buff.

Removes the buff when:
-The source dies.
-The source moves out of range.
-The recipient moves out of range.
-The source disabled the buff, and the buff does not have the "alliesOnly" flag set to "true"
-The source is deleted.

NOTE: The aura application is currently hooked into Movement (sight refresh) and UpdateToken (click token.) So there may be a momentary delay with aura application.
NOTE2: It does not apply the buff the moment a token is created. Rather, it does it on move/click/update. This will be addressed later.


Updates
(v1.3.2)  Actors with an item, buff, etc named "Diehard" will now continue to share their auras when below 0 HP.
(v1.3.1)  Delete Token, Create Token are now working. Deleting a token removes inherited buffs. Tokens hitting negative HP now triggers immediately.
(v1.2.7)  Delete Token hooks have once again been disabled. They were causing a bug with stacking buff icons.
(v1.2.0)  Using the shareEnemies Boolean Flag on an aura will switch it to only impact enemies.* 
          *Combine this with ShareInactive or it will still impact the original token.
(v1.0.10) Code cleanup to improve readability and speed up processing of auras.


Known Bugs:
-Renaming an aura will not remove the old buff from a token. Rename auras on the character sheet before the token is placed on the scene.
-Deleting tokens was causing some console errors. If you end up with any weirdness occuring when deleting items from actors sheets, please tell me ASAP. 
 I had put in some error handling for this errors, and I want to make sure that it doesn't impact the deletion of items, buffs, features from character sheets.

